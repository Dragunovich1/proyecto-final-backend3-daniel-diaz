{{> header}}

<div class="container">
  <div class="product-management">
    <h2>Gestión de Productos</h2>
    <button id="add-product-btn" class="btn-add-product">Agregar Producto</button>

    <!-- Área para las alertas -->
    <div id="alert-container" class="alert-container"></div>

    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Código</th>
          <th>Precio</th>
          <th>Categoría</th>
          <th>Stock</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="product-list">
        {{#each products}}
        <tr>
          <td>{{this.title}}</td>
          <td>{{this.description}}</td>
          <td>{{this.code}}</td>
          <td>${{this.price}}</td>
          <td>{{this.category}}</td>
          <td>{{this.stock}}</td>
          <td>
            <button class="edit-btn btn-action" data-id="{{this._id}}" data-title="{{this.title}}" data-description="{{this.description}}" data-code="{{this.code}}" data-price="{{this.price}}" data-category="{{this.category}}" data-stock="{{this.stock}}">Editar</button>
            <button class="add-cart-btn btn-action" data-id="{{this._id}}">Agregar al Carrito</button>
            <button class="delete-btn btn-action delete-btn-red" data-id="{{this._id}}">Eliminar</button>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>

<!-- Modal para agregar producto -->
<div id="add-product-modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>Agregar Nuevo Producto</h3>
    <form id="add-product-form">
      <label for="title">Nombre del Producto:</label>
      <input type="text" id="title" name="title" required>

      <label for="description">Descripción:</label>
      <input type="text" id="description" name="description" required>

      <label for="code">Código:</label>
      <input type="text" id="code" name="code" required>

      <label for="price">Precio:</label>
      <input type="number" id="price" name="price" step="0.01" required>

      <label for="category">Categoría:</label>
      <input type="text" id="category" name="category" required>

      <label for="stock">Stock:</label>
      <input type="number" id="stock" name="stock" required>

      <button type="submit" class="btn-add-product">Agregar Producto</button>
    </form>
  </div>
</div>

<!-- Modal para editar producto -->
<div id="edit-product-modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>Editar Producto</h3>
    <form id="edit-product-form">
      <input type="hidden" id="edit-id" name="id">

      <label for="edit-title">Nombre del Producto:</label>
      <input type="text" id="edit-title" name="title" required>

      <label for="edit-description">Descripción:</label>
      <input type="text" id="edit-description" name="description" required>

      <label for="edit-code">Código:</label>
      <input type="text" id="edit-code" name="code" required>

      <label for="edit-price">Precio:</label>
      <input type="number" id="edit-price" name="price" step="0.01" required>

      <label for="edit-category">Categoría:</label>
      <input type="text" id="edit-category" name="category" required>

      <label for="edit-stock">Stock:</label>
      <input type="number" id="edit-stock" name="stock" required>

      <button type="submit" class="btn-add-product">Guardar Cambios</button>
    </form>
  </div>
</div>

<script src="/js/dashboard.js"></script>
